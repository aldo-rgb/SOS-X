================================================================================
                    PROMPT DE CONTINUACIÃ“N - ENTREGAX
                    Plataforma de LogÃ­stica USA/China â†’ MÃ©xico
                    Ãšltima actualizaciÃ³n: 7 de febrero de 2026
================================================================================

INSTRUCCIONES PARA EL ASISTENTE:
- Eres GitHub Copilot usando Claude Opus 4.5
- El usuario se llama Aldo y estÃ¡ desarrollando EntregaX
- Responde de forma directa, tÃ©cnica y eficiente
- Usa espaÃ±ol mexicano informal pero profesional
- Ejecuta comandos sin pedir confirmaciÃ³n
- Cuando edites cÃ³digo, hazlo directamente sin mostrar bloques largos
- El proyecto estÃ¡ en: /Users/kmpsdeveloper/Desktop/Proyectos/SOS-X
- Sistema operativo: macOS con Homebrew

================================================================================
                              ARQUITECTURA GENERAL
================================================================================

ECOSISTEMA:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EntregaX Ecosystem                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Web Admin     â”‚  â”‚   Mobile App    â”‚  â”‚   Backend API   â”‚  â”‚
â”‚  â”‚   React+Vite    â”‚  â”‚   Expo+RN       â”‚  â”‚   Express+TS    â”‚  â”‚
â”‚  â”‚   Port: 5173    â”‚  â”‚   Expo Go       â”‚  â”‚   Port: 3001    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                    â”‚   PostgreSQL 15     â”‚                      â”‚
â”‚                    â”‚   entregax_db       â”‚                      â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RUTAS DEL PROYECTO:
- Backend:  /Users/kmpsdeveloper/Desktop/Proyectos/SOS-X/entregax-backend-api
- Web:      /Users/kmpsdeveloper/Desktop/Proyectos/SOS-X/entregax-web-admin  
- Mobile:   /Users/kmpsdeveloper/Desktop/Proyectos/SOS-X/entregax-mobile-app

COMANDOS PARA INICIAR:
# Backend
cd entregax-backend-api && npx ts-node src/index.ts

# Frontend Web
cd entregax-web-admin && npm run dev

# Mobile
cd entregax-mobile-app && npx expo start

# PostgreSQL
/opt/homebrew/opt/postgresql@15/bin/psql -d entregax_db

================================================================================
                              STACK TECNOLÃ“GICO
================================================================================

BACKEND (entregax-backend-api):
- Node.js 18+
- TypeScript 5.x
- Express 4.x
- PostgreSQL 15
- bcrypt (hash passwords)
- jsonwebtoken (JWT)
- pg (PostgreSQL client)
- OpenAI (GPT-4 Vision para KYC)
- Facturapi (FacturaciÃ³n CFDI)
- axios (HTTP client)

FRONTEND WEB (entregax-web-admin):
- React 19.x
- Vite 7.x
- TypeScript 5.x
- Material UI 7.x (MUI)
- i18next (internacionalizaciÃ³n ES/EN)
- Axios

MOBILE APP (entregax-mobile-app):
- Expo SDK 54
- React Native 0.81.5
- React Navigation 7.x
- React Native Paper 5.x
- expo-camera, expo-image-picker, expo-file-system

================================================================================
                         ESTRUCTURA DE ARCHIVOS BACKEND
================================================================================

entregax-backend-api/src/
â”œâ”€â”€ index.ts                    # Entry point + todas las rutas
â”œâ”€â”€ db.ts                       # Pool de conexiÃ³n PostgreSQL
â”œâ”€â”€ types.ts                    # Interfaces TypeScript
â”œâ”€â”€ authController.ts           # Login, registro, usuarios, dashboard
â”œâ”€â”€ packageController.ts        # Paquetes, consolidaciones, etiquetas
â”œâ”€â”€ warehouseController.ts      # Paneles de bodega multi-ubicaciÃ³n
â”œâ”€â”€ pricingEngine.ts            # Motor de cotizaciÃ³n automÃ¡tica
â”œâ”€â”€ invoicingController.ts      # FacturaciÃ³n CFDI con Facturapi
â”œâ”€â”€ commissionController.ts     # Comisiones y sistema de referidos
â”œâ”€â”€ addressController.ts        # CRUD de direcciones del cliente
â”œâ”€â”€ verificationController.ts   # VerificaciÃ³n KYC con GPT-4 Vision
â”œâ”€â”€ paymentController.ts        # IntegraciÃ³n PayPal
â””â”€â”€ supplierPaymentController.ts # Pagos a proveedores + tipo de cambio

================================================================================
                         ESTRUCTURA DE ARCHIVOS FRONTEND
================================================================================

entregax-web-admin/src/
â”œâ”€â”€ main.tsx                    # Entry point
â”œâ”€â”€ App.tsx                     # Layout principal + routing
â”œâ”€â”€ App.css                     # Estilos globales
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts               # ConfiguraciÃ³n i18next
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ es.json            # Traducciones espaÃ±ol
â”‚       â””â”€â”€ en.json            # Traducciones inglÃ©s
â””â”€â”€ pages/
    â”œâ”€â”€ LoginPage.tsx          # Login
    â”œâ”€â”€ ClientsPage.tsx        # CRUD clientes
    â”œâ”€â”€ ShipmentsPage.tsx      # RecepciÃ³n PO Box USA (wizard 5 pasos)
    â”œâ”€â”€ WarehouseHubPage.tsx   # Hub de bodegas (5 ubicaciones)
    â”œâ”€â”€ WarehouseReceptionPage.tsx # Panel individual por ubicaciÃ³n
    â”œâ”€â”€ ConsolidationsPage.tsx # Control de salidas
    â”œâ”€â”€ QuotesPage.tsx         # Cotizador
    â”œâ”€â”€ PricingPage.tsx        # Listas de precios
    â”œâ”€â”€ FiscalPage.tsx         # FacturaciÃ³n fiscal
    â”œâ”€â”€ CommissionsPage.tsx    # Comisiones y referidos
    â”œâ”€â”€ SupplierPaymentsPage.tsx # Pagos a proveedores
    â”œâ”€â”€ VerificationsPage.tsx  # VerificaciÃ³n KYC
    â””â”€â”€ SettingsPage.tsx       # ConfiguraciÃ³n

================================================================================
                         ESTRUCTURA MOBILE APP
================================================================================

entregax-mobile-app/src/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.ts                 # Cliente Axios + tipos
â””â”€â”€ screens/
    â”œâ”€â”€ LoginScreen.tsx        # Login con gradiente naranja
    â”œâ”€â”€ HomeScreen.tsx         # Lista de paquetes + multi-selecciÃ³n
    â””â”€â”€ ConsolidationSummary.tsx # ConfirmaciÃ³n de envÃ­o

================================================================================
                              BASE DE DATOS
================================================================================

TABLAS PRINCIPALES (16 tablas):

1. users
   - id SERIAL PRIMARY KEY
   - full_name VARCHAR(100) NOT NULL
   - email VARCHAR(100) UNIQUE NOT NULL
   - password VARCHAR(255) NOT NULL
   - box_id VARCHAR(20) UNIQUE NOT NULL (formato: ETX-XXXX)
   - role VARCHAR(20) DEFAULT 'client'
   - phone VARCHAR(50)
   - is_verified BOOLEAN DEFAULT false
   - verification_status VARCHAR(20) DEFAULT 'unverified'
   - ine_front_url, ine_back_url, selfie_url, signature_url TEXT
   - referral_code VARCHAR(20) UNIQUE
   - referred_by_id INTEGER REFERENCES users(id)
   - assigned_price_list_id INTEGER REFERENCES price_lists(id)
   - warehouse_location VARCHAR(50)
   - default_transport, default_carrier VARCHAR

2. packages
   - id SERIAL PRIMARY KEY
   - user_id INTEGER REFERENCES users(id)
   - tracking_internal VARCHAR(50) UNIQUE (formato: US-XXXX####)
   - tracking_provider VARCHAR(100)
   - description VARCHAR(255)
   - weight DECIMAL(10,2)
   - dimensions VARCHAR(50) (formato: "30x20x15")
   - declared_value DECIMAL(10,2)
   - status VARCHAR DEFAULT 'received' (received, in_transit, customs, ready_pickup, delivered)
   - destination_country, destination_city, destination_address, destination_zip, destination_phone, destination_contact
   - carrier VARCHAR(50)
   - is_master BOOLEAN DEFAULT false
   - master_id INTEGER REFERENCES packages(id)
   - box_number, total_boxes INTEGER
   - consolidation_id INTEGER REFERENCES consolidations(id)
   - photo_url TEXT
   - needs_instructions BOOLEAN DEFAULT true

3. consolidations
   - id SERIAL PRIMARY KEY
   - user_id INTEGER REFERENCES users(id) NOT NULL
   - status VARCHAR(50) DEFAULT 'pending' (pending, processing, shipped, delivered)
   - total_weight DECIMAL(10,2) DEFAULT 0
   - payment_status VARCHAR(20)
   - created_at TIMESTAMP

4. addresses
   - id SERIAL PRIMARY KEY
   - user_id INTEGER REFERENCES users(id)
   - alias VARCHAR(50) DEFAULT 'Principal'
   - recipient_name, street, exterior_number, interior_number
   - neighborhood, city, state, zip_code, phone, reference
   - is_default BOOLEAN DEFAULT false

5. warehouse_receipts
   - id SERIAL PRIMARY KEY
   - tracking_number VARCHAR(100) UNIQUE NOT NULL
   - service_code VARCHAR(50) NOT NULL
   - user_id INTEGER REFERENCES users(id)
   - weight_kg, length_cm, width_cm, height_cm DECIMAL
   - quantity INTEGER DEFAULT 1
   - quoted_usd, quoted_mxn DECIMAL
   - fx_rate DECIMAL
   - status VARCHAR DEFAULT 'received'
   - payment_status VARCHAR DEFAULT 'pending'
   - received_by INTEGER REFERENCES users(id)
   - warehouse_location VARCHAR(50) NOT NULL
   - notes TEXT
   - photo_url TEXT
   - INDEX en (warehouse_location, created_at)

6. logistics_services
   - id SERIAL PRIMARY KEY
   - code VARCHAR(50) UNIQUE NOT NULL
   - name VARCHAR(100) NOT NULL
   - calculation_type VARCHAR(20) (per_kg, per_cbm, per_package)
   - requires_dimensions BOOLEAN DEFAULT false
   - is_active BOOLEAN DEFAULT true
   
   DATOS:
   - AIR_CHN_MX: 'AÃ©reo China â†’ MÃ©xico', per_kg, requires_dimensions=true
   - SEA_CHN_MX: 'MarÃ­timo China â†’ MÃ©xico', per_cbm, requires_dimensions=true
   - POBOX_USA: 'PO Box USA â†’ MÃ©xico', per_package
   - AA_DHL: 'LiberaciÃ³n AA DHL', per_package
   - NATIONAL: 'Nacional MÃ©xico', per_kg, requires_dimensions=true

7. price_lists
   - id SERIAL PRIMARY KEY
   - name VARCHAR(100) NOT NULL
   - description TEXT
   - is_default BOOLEAN DEFAULT false
   - is_active BOOLEAN DEFAULT true

8. pricing_rules
   - id SERIAL PRIMARY KEY
   - price_list_id INTEGER REFERENCES price_lists(id)
   - service_id INTEGER REFERENCES logistics_services(id)
   - min_unit, max_unit DECIMAL (rangos de peso/volumen/cantidad)
   - unit_cost DECIMAL NOT NULL
   - fixed_fee DECIMAL DEFAULT 0

9. commission_rates
   - id SERIAL PRIMARY KEY
   - service_type VARCHAR(50) NOT NULL
   - label VARCHAR(100) NOT NULL
   - percentage DECIMAL(5,2) DEFAULT 0.00
   - leader_override DECIMAL(5,2) DEFAULT 10.00
   - fiscal_emitter_id INTEGER REFERENCES fiscal_emitters(id)

10. fiscal_emitters (TUS EMPRESAS)
    - id SERIAL PRIMARY KEY
    - alias VARCHAR(50)
    - rfc VARCHAR(13) NOT NULL
    - business_name VARCHAR(255) NOT NULL
    - fiscal_regime VARCHAR(10)
    - zip_code VARCHAR(10)
    - api_key TEXT (Facturapi key)
    - is_active BOOLEAN DEFAULT true

11. fiscal_profiles (DATOS FISCALES DEL CLIENTE)
    - id SERIAL PRIMARY KEY
    - user_id INTEGER REFERENCES users(id)
    - rfc VARCHAR(13) NOT NULL
    - business_name VARCHAR(255) NOT NULL
    - fiscal_regime VARCHAR(10)
    - zip_code VARCHAR(10)
    - tax_use VARCHAR(10) DEFAULT 'G03'
    - email VARCHAR(255)
    - is_default BOOLEAN DEFAULT false

12. invoices
    - id SERIAL PRIMARY KEY
    - consolidation_id INTEGER REFERENCES consolidations(id)
    - fiscal_emitter_id INTEGER REFERENCES fiscal_emitters(id)
    - fiscal_profile_id INTEGER REFERENCES fiscal_profiles(id)
    - uuid VARCHAR(50)
    - folio VARCHAR(20)
    - status VARCHAR(20) DEFAULT 'generated'
    - pdf_url, xml_url TEXT
    - amount DECIMAL(10,2)

13. exchange_rates
    - id SERIAL PRIMARY KEY
    - rate DECIMAL(10,4) NOT NULL
    - set_by_admin_id INTEGER REFERENCES users(id)
    - created_at TIMESTAMP

14. supplier_payments
    - id SERIAL PRIMARY KEY
    - user_id INTEGER REFERENCES users(id)
    - consolidation_id INTEGER
    - amount_usd, fee_percent, fixed_fee, total_usd DECIMAL
    - fx_rate, total_mxn DECIMAL
    - status VARCHAR

15. client_payment_settings
    - id SERIAL PRIMARY KEY
    - user_id INTEGER REFERENCES users(id)
    - fee_percent, fixed_fee, fx_markup DECIMAL

16. payment_providers
    - id SERIAL PRIMARY KEY
    - name VARCHAR(50)
    - is_active BOOLEAN
    - config JSONB

================================================================================
                         UBICACIONES DE BODEGA
================================================================================

SISTEMA MULTI-UBICACIÃ“N (warehouseController.ts):

| CÃ³digo       | Nombre            | PaÃ­s | Servicios Permitidos    |
|--------------|-------------------|------|-------------------------|
| usa_pobox    | PO Box USA        | ğŸ‡ºğŸ‡¸  | POBOX_USA, NATIONAL     |
| china_air    | AÃ©reo China       | ğŸ‡¨ğŸ‡³  | AIR_CHN_MX              |
| china_sea    | MarÃ­timo China    | ğŸ‡¨ğŸ‡³  | SEA_CHN_MX              |
| mx_cedis     | CEDIS MÃ©xico      | ğŸ‡²ğŸ‡½  | AA_DHL                  |
| mx_national  | Nacional MÃ©xico   | ğŸ‡²ğŸ‡½  | NATIONAL                |

LÃ“GICA DE ACCESO EN App.tsx:
- super_admin â†’ Ve WarehouseHubPage con 5 cards (una por ubicaciÃ³n)
- staff con warehouse_location â†’ Va directo a su panel asignado
- Cada panel filtra automÃ¡ticamente por ubicaciÃ³n

================================================================================
                         MOTOR DE PRECIOS (pricingEngine.ts)
================================================================================

TIPOS DE CÃLCULO:
- per_kg: (peso Ã— costo_unitario) + cargo_fijo
- per_cbm: (LÃ—AÃ—H/1000000 Ã— costo_unitario) + cargo_fijo  
- per_package: (cantidad Ã— costo_unitario) + cargo_fijo

REGLAS ACTUALES (Tarifa PÃºblica, ID=1):
- AIR_CHN_MX: 0-45kg=$12/kg, 45-100kg=$10.50/kg, 100+kg=$9/kg + $25 fijo
- SEA_CHN_MX: 0-5cbm=$350/cbm, 5+cbm=$300/cbm + $50 fijo
- POBOX_USA: $8/paquete
- NATIONAL: $25/kg + $50 fijo
- AA_DHL: 0-5=$50/paq, 5+=$45/paq

FUNCIÃ“N PRINCIPAL:
async function calculateQuote({ serviceCode, weightKg, lengthCm, widthCm, heightCm, quantity, userId })
Retorna: { usd, mxn, fxRate, breakdown }

================================================================================
                         ROLES DE USUARIO
================================================================================

| Rol            | DescripciÃ³n              | Acceso                    |
|----------------|--------------------------|---------------------------|
| super_admin    | Administrador total      | Todo el sistema           |
| branch_manager | Gerente de sucursal      | Su sucursal + reportes    |
| counter_staff  | Personal de mostrador    | RecepciÃ³n + entregas      |
| warehouse_ops  | Operaciones de bodega    | Inventario + paquetes     |
| client         | Cliente final            | Solo sus paquetes         |

================================================================================
                      ENDPOINTS API PRINCIPALES
================================================================================

BASE URL: http://localhost:3001/api

AUTENTICACIÃ“N:
POST /auth/login         - Login (retorna JWT)
POST /auth/register      - Registro
GET  /auth/profile       - Perfil del usuario actual

USUARIOS:
GET    /users            - Lista usuarios
GET    /users/:id        - Usuario por ID
PUT    /users/:id        - Actualizar usuario
DELETE /users/:id        - Eliminar usuario

PAQUETES:
GET  /packages           - Lista paquetes (?status=received)
POST /packages           - Crear paquete (soporta multi-caja)
GET  /packages/:id       - Obtener paquete
PATCH /packages/:id/status - Cambiar estado
GET  /packages/:id/labels  - Etiquetas para imprimir

CONSOLIDACIONES:
POST /consolidations          - Crear consolidaciÃ³n (desde mobile)
GET  /admin/consolidations    - Lista consolidaciones (admin)

BODEGA:
GET  /warehouse/services      - Servicios disponibles por ubicaciÃ³n
GET  /warehouse/receipts      - Recepciones de la bodega
POST /warehouse/receipts      - Registrar recepciÃ³n
PUT  /warehouse/receipts/:id  - Actualizar recepciÃ³n
GET  /warehouse/stats         - EstadÃ­sticas del dÃ­a
GET  /warehouse/search-client/:boxId - Buscar cliente
GET  /admin/warehouse-locations - Lista ubicaciones
PUT  /admin/users/:id/warehouse-location - Asignar ubicaciÃ³n

PRICING:
POST /pricing/quote           - Calcular cotizaciÃ³n

FACTURACIÃ“N:
GET  /fiscal/emitters         - Empresas emisoras
POST /fiscal/emitters         - Crear emisor
PUT  /fiscal/emitters/:id     - Actualizar emisor
GET  /fiscal/profiles/:userId - Perfiles fiscales del cliente
POST /fiscal/profiles         - Crear perfil fiscal
POST /fiscal/invoices         - Generar factura
GET  /fiscal/invoices/:id/pdf - Descargar PDF

VERIFICACIÃ“N KYC:
POST /verification/start      - Iniciar verificaciÃ³n (selfie + INE)
GET  /verification/status     - Estado de verificaciÃ³n
GET  /admin/verifications     - Lista pendientes
PUT  /admin/verifications/:id - Aprobar/rechazar

PAGOS:
POST /payments/create-order   - Crear orden PayPal
POST /payments/capture        - Capturar pago
GET  /payments/history        - Historial

PAGOS A PROVEEDORES:
GET  /supplier/exchange-rate  - Tipo de cambio actual
PUT  /supplier/exchange-rate  - Actualizar FX
POST /supplier/calculate      - Calcular pago
POST /supplier/payments       - Registrar pago
GET  /supplier/payments       - Historial

DIRECCIONES:
GET  /addresses/:userId       - Direcciones del cliente
POST /addresses               - Crear direcciÃ³n
PUT  /addresses/:id           - Actualizar
DELETE /addresses/:id         - Eliminar

================================================================================
                         CREDENCIALES DE PRUEBA
================================================================================

SUPER ADMIN:
- Email: aldo@entregax.com
- Password: Quantum123
- Role: super_admin
- Box ID: ETX-5993

CLIENTE:
- Email: usuario@entregax.com
- Password: Test123
- Role: client

VERIFICAR LOGIN:
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"aldo@entregax.com","password":"Quantum123"}'

================================================================================
                         MÃ“DULOS COMPLETADOS âœ…
================================================================================

1.  AutenticaciÃ³n JWT (login, registro, refresh)
2.  CRUD de Usuarios/Clientes
3.  Sistema de Paquetes con Wizard de 5 pasos
4.  Sistema Master + Hijas (multi-caja)
5.  Tracking interno con prefijo US-
6.  Dashboard con estadÃ­sticas
7.  InternacionalizaciÃ³n ES/EN completa
8.  Mobile App (login, lista paquetes, consolidaciones)
9.  Multi-selecciÃ³n de paquetes
10. Consolidaciones (Ã³rdenes de envÃ­o)
11. Etiquetas con QR
12. Bodegas Multi-UbicaciÃ³n (5 paneles)
13. WarehouseHubPage (hub para admin)
14. WarehouseReceptionPage (panel individual)
15. Motor de Precios (pricingEngine.ts)
16. Listas de Precios y Reglas
17. FacturaciÃ³n Fiscal (CFDI con Facturapi)
18. Comisiones y Sistema de Referidos
19. VerificaciÃ³n KYC con GPT-4 Vision
20. Pagos con PayPal
21. Pagos a Proveedores con Tipo de Cambio
22. GestiÃ³n de Direcciones

================================================================================
                         PENDIENTES POR DESARROLLAR ğŸš§
================================================================================

ALTA PRIORIDAD:
1. Notificaciones Push (Firebase/Expo)
2. Tracking en tiempo real con mapa
3. Reportes avanzados con grÃ¡ficas
4. ExportaciÃ³n a Excel/PDF

MEDIA PRIORIDAD:
5. GestiÃ³n de sucursales
6. IntegraciÃ³n con APIs de paqueterÃ­as (FedEx, UPS, DHL)
7. Sistema de tickets de soporte
8. Chat en tiempo real

BAJA PRIORIDAD:
9. App para repartidores
10. Sistema de rutas de entrega
11. IntegraciÃ³n con WhatsApp Business

================================================================================
                         DESIGN SYSTEM
================================================================================

COLORES:
- Action Orange: #F05A28 (botones, acentos)
- Deep Tech Black: #111111 (headers, textos)
- Gradientes: linear-gradient(135deg, #F05A28 0%, #ff7849 100%)

COMPONENTES MUI:
- Usar Box, Paper, Card de MUI
- Tablas con TableContainer, Table, TableHead, TableBody, TableRow, TableCell
- Formularios con TextField, Select, Button
- Feedback con Alert, Snackbar, CircularProgress

================================================================================
                         VARIABLES DE ENTORNO
================================================================================

# entregax-backend-api/.env
PORT=3001
DATABASE_URL=postgres://localhost:5432/entregax_db
JWT_SECRET=EntregaX_Super_Secret_Key_2025
JWT_EXPIRES_IN=7d
OPENAI_API_KEY=sk-...
FACTURAPI_KEY=...
PAYPAL_CLIENT_ID=...
PAYPAL_SECRET=...
PAYPAL_API_URL=https://api-m.sandbox.paypal.com

================================================================================
                         NOTAS IMPORTANTES
================================================================================

1. El proyecto usa TypeScript estricto - no ignorar errores de tipos
2. Todas las pÃ¡ginas tienen soporte i18n - agregar traducciones en es.json y en.json
3. Los endpoints protegidos requieren header: Authorization: Bearer {token}
4. El wizard de ShipmentsPage tiene 5 pasos (cajas, tracking, destino, cliente, confirmaciÃ³n)
5. El sistema de bodegas filtra automÃ¡ticamente por warehouse_location del usuario
6. Las cotizaciones se calculan automÃ¡ticamente al registrar recepciones
7. Los roles se verifican en el backend antes de cada operaciÃ³n
8. El manual completo estÃ¡ en DEVELOPER_MANUAL.md (1810 lÃ­neas)

================================================================================
               MENÃš DE NAVEGACIÃ“N WEB ADMIN (App.tsx)
================================================================================

| # | Item               | Componente              | DescripciÃ³n              |
|---|--------------------|-------------------------|--------------------------|
| 0 | Dashboard          | DashboardContent        | Resumen general          |
| 1 | Clientes           | ClientsPage             | CRUD usuarios            |
| 2 | EnvÃ­os             | WarehouseHubPage        | Hub bodegas / Panel      |
| 3 | Cotizaciones       | QuotesPage              | Calculadora precios      |
| 4 | Salidas            | ConsolidationsPage      | Consolidaciones          |
| 5 | FacturaciÃ³n        | FiscalPage              | CFDI                     |
| 6 | Comisiones         | CommissionsPage         | Referidos                |
| 7 | Listas de Precios  | PricingPage             | Tarifas                  |
| 8 | Pagos Proveedores  | SupplierPaymentsPage    | Egresos                  |
| 9 | Verificaciones     | VerificationsPage       | KYC                      |
|10 | ConfiguraciÃ³n      | SettingsPage            | Preferencias             |

================================================================================
               PARA CONTINUAR DESARROLLO - COPIA ESTE PROMPT
================================================================================

Soy Aldo y estoy continuando el desarrollo de EntregaX, una plataforma de 
logÃ­stica que conecta USA/China con MÃ©xico. 

CONTEXTO TÃ‰CNICO:
- Backend: Express+TypeScript en puerto 3001
- Frontend: React+Vite+MUI en puerto 5173  
- Mobile: Expo SDK 54 + React Native
- DB: PostgreSQL 15 (entregax_db) con 16 tablas
- Ruta: /Users/kmpsdeveloper/Desktop/Proyectos/SOS-X

MÃ“DULOS COMPLETADOS (22):
AutenticaciÃ³n JWT, CRUD usuarios, paquetes multi-caja, tracking US-XXXX,
dashboard, i18n ES/EN, mobile app, consolidaciones, etiquetas QR,
5 paneles de bodega por ubicaciÃ³n (WarehouseHubPage), motor de precios
con reglas por bloques, facturaciÃ³n CFDI con Facturapi, comisiones y
referidos, verificaciÃ³n KYC con GPT-4 Vision, pagos PayPal, pagos a
proveedores con tipo de cambio, direcciones de envÃ­o.

PENDIENTES:
Push notifications, tracking en mapa, reportes, integraciones paqueterÃ­as.

El manual completo estÃ¡ en DEVELOPER_MANUAL.md.

ContinÃºa el desarrollo desde donde quedamos. Cuando ejecutes comandos o
edites cÃ³digo, hazlo directamente sin pedir confirmaciÃ³n.

================================================================================
                              FIN DEL DOCUMENTO
================================================================================
